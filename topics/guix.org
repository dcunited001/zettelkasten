:PROPERTIES:
:ID:       b82627bf-a0de-45c5-8ff4-229936549942
:END:
#+title: Guix

+ [[id:87c43128-92c2-49ed-b76c-0d3c2d6182ec][Scheme]]

* Docs
+ [[https://guix.gnu.org/en/manual/devel/en/html_node/][Reference Manual]] (devel)
+ [[https://guix.gnu.org/cookbook/en/guix-cookbook.html][Cookbook]]
+ [[id:87c43128-92c2-49ed-b76c-0d3c2d6182ec][Scheme]] (roam)

* Resources

** Community
*** GNU
+ [[https://debbugs.gnu.org/db/ix/full.html][debbugs]] (debian bugs)

*** IRC

** Channels
+ [[https://www.fosskers.ca/en/blog/contributing-to-emacs][flatwhatson/guix-channel]]

** Study

* Topics
** Guix Home

** Guix Environment

** [[https://guixwl.org/tutorial][Guix Workflow]]

*** TODO look into building profiles/containers/environments
+ [ ] see =Emacs.org= and =.config/guix/manifests/emacs.scm= from daviwil's
  dotfiles. the =activate-profiles= command builds these
+ [ ] how to build something with guix and run it where guix isn't available?
*** TODO restrict guix commands sent to guix-daemon to a group

** Build Farms

+ 5.3 [[https://guix.gnu.org/en/manual/en/html_node/Substitutes.html][Substitutes]]

** Shepherd
*** Logging
+ [ ] logging commands/interface/filtering

** Security
*** [[https://unix.stackexchange.com/questions/222999/installing-nix-or-guix-without-root-permissions][Guix and Sudo]]: =--with-store-dir=
*** GNU Guix [[https://github.com/pjotrp/guix-notes/blob/master/GUIX-NO-ROOT.org][without root access]]
*** [[https://nvd.nist.gov/vuln/detail/CVE-2021-27851][CVE-2021-27851]]: Guix-daemon build escalation
- what limits are there on who can ask guix-daemon to do what?

** Reporoducibility
+ [[https://mfelsoci.gitlabpages.inria.fr/thesis/environment.html][Reproducible Thesis using GNU Guix & Org Mode]]
+ Guix HPC [[https://gitlab.inria.fr/guix-hpc/website/-/blob/master/drafts/activity-report-2021.md][Activity Report 2021]]

* Issues
** OS with custom locale and XKB keyboard
** .guix-profile vs .config/guix/current (s/o link)
** Setting an alternate =/gnu/store=
** [[https://unix.stackexchange.com/questions/561093/what-is-the-difference-between-guix-profile-and-config-guix-current][Difference b/w guix profiles]]

* Installations
** Arch

**** Run the initial =guix pull=
+ =guix describe= doesn't work
+ Authorize guix substitutes from main Guix channel
+ Run =systemctl enable/start guix-daemon.service= then =guix pull=

**** Setup SystemD
+ The AUR package has set up systemd to launch under root.
  - The systemd service files will need to be updated
+ The =guix-daemon-latest.service= needs a path to be edited.
  - In =/usr/lib/systemd/system/guix-daemon-latest.service=, edit the
    =Service.ExecStart= variable: set the correct path for the user that
    installed Guix.
+ Disable/stop =guix-daemon= and switch over to =guix-daemon-latest=
  - This daemon runs a profile that was constructed via =guix pull=
  - When this profile is active
    - =.config/guix/current/bin/guix describe= should work properly

**** Configure =$PATH=
+ Set path to point =guix= binary to the one in =.config/guix/current/bin/=

**** Add custom channels


**** Tune Guix configuration
+ refine options for =guix-daemon=
+ configure substitutes for various packages

**** TODO Hack on a package within an isolated environment
[[https://www.reddit.com/r/GUIX/comments/p6x0cg/guix_environmentsworkflow_for_programming/][guix/direnv config]]
