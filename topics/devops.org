:PROPERTIES:
:ID:       ac2a1ae4-a695-4226-91f0-8386dc4d9b07
:END:

#+TITLE:     DevOps
#+AUTHOR:    David Conner
#+EMAIL:     noreply@te.xel.io
#+DESCRIPTION: notes

* Docs

* Resources

* Issues

* Containers
** Docker

** Containerd

** Open Container (?)

** Flatpak
This is a platform for distributing apps, but is technically containerized.
[[https://docs.flatpak.org/en/latest/tips-and-tricks.html?highlight=%22%2Fetc%2Fflatpak%22#adding-a-custom-installation][Custom installations allow you to install to flatpak-specific disk-image]]. This
can be shared to multiple VM's via proxmox to make desktop apps like
Krita/Blender/Steam more portable.

#+begin_quote
... So, if i want to distro-hop ... but I don't want to lose my app
configurations.
#+end_quote


 Environment Vars

|--------------------------+-----------------------+-----------------------------------------|
| Name                     | Default               | Desc                                    |
|--------------------------+-----------------------+-----------------------------------------|
| FLATPAK_USER_DIR         | XDG_DATA_PATH/flatpak | location of per-user installation       |
| FLATPAK_SYSTEM_DIR       | /var/lib/flatpak      | location of system-wide installation    |
| FLATPAK_SYSTEM_CACHE_DIR | /var/tmp/             | place for temp child repos during pulls |
| FLATPAK_CONFIG_DIR       | /etc/flatpak          | flatpak site config                     |
| FLATPAK_RUN_DIR          | /run/flatpak          | runtime global files                    |
|--------------------------+-----------------------+-----------------------------------------|

Modified XDG Vars

|-----------------+------------------------------|
| Base Dir        | Default                      |
|-----------------+------------------------------|
| XDG_CONFIG_HOME | ~/.var/app/$app/config       |
| XDG_DATA_HOME   | ~/.var/app/$app/data         |
| XDG_CACHE_HOME  | ~/.var/app/$app/cache        |
| XDG_STATE_HOME  | ~/.var/app/$app/.local/state |
|-----------------+------------------------------|

*** Docs
+ [[https://docs.flatpak.org/en/latest][Main Docs]]
+ [[https://docs.flatpak.org/en/latest/conventions.html][Flatpak Conventions]]

*** Resources
+ [[https://docs.flatpak.org/en/latest/desktop-integration.html#portals][Portals]] interface for securely permitting app to access host resources from sandbox

*** Caveats

When running apps from a portable flatpak custom installation, the ABIs for a
flatpak ELF must be compatible with those your system expects binaries to adhere
to.

+ [[https://stackoverflow.com/questions/2171177/what-is-an-application-binary-interface-abi][The TLDR S/O post on ABIs I shouldve finished reading]]
+ [[https://kernelnewbies.org/ABI][Linux ABI]]
+ [[https://www.systutorials.com/docs/linux/man/1-abidiff/][abidiff]] cmdline tool

* Orchestration
** Rancher
*** Docs
+ [[https://rancher.com/docs/rancher/v2.6/en/][Rancher]] 2.6
+ Rancher's own [[https://github.com/rancher/charts][rancher/charts]]

*** Resources
+ [[https://rancher.com/docs/rancher/v2.6/en/best-practices/rancher-server/rancher-in-vsphere/][Installing Rancher in a vSphere Environment]]
+ [[https://rancher.com/docs/rancher/v2.6/en/cluster-provisioning/][Cluster Provisioning with Rancher]]
+ [[https://rancher.com/docs/rancher/v2.6/en/helm-charts/][Helm Charts in Rancher]]
+ [[https://rancher.com/docs/rancher/v2.6/en/overview/architecture-recommendations/][Architecture Recommendations]]
+ [[https://rancher.com/docs/rancher/v2.6/en/k8s-in-rancher/][Links to Kubernetes Resources]]

** Kubernetes
*** Docs
+ [[github:kelseyhightower/kubernetes-the-hard-way][kelseyhightower/kubernetes-the-hard-way]]
*** Resources
+ [[https://github.com/marco-lancini/k8s-lab-plz][marco-lancici/k8s-lab-plz]]: deploy a kubernetes lab cluster with [[https://please.build/basics.html][please.build]],
  a Make-style build tool inspired by Blaze/Bazel/Buck, etc.
  - walkthrough: [[https://www.marcolancini.it/2021/blog-kubernetes-lab-baremetal/][Kubernetes Lab on Baremetal]]
+ [[https://www.dasblinkenlichten.com/getting-started-kubernetes-using-ansible/][Getting started with kubernetes using ansible]]

** Swarm

* Provisioning
** Ansible
*** Docs
+ [[https://docs.ansible.com/ansible-core/devel/index.html][Ansible Core]] ([[https://docs.ansible.com/ansible-core/2.12_ja/index.html][jp]])
+ [[https://docs.ansible.com/ansible/latest/galaxy/user_guide.html][Ansible Galaxy Docs]]
+ [[https://docs.ansible.com/ansible_community.html][Ansible Community Docs]]
+ Ansible [[github:ansible/ansible-examples][example projects]]
+ Ansible [[https://docs.ansible.com/ansible/latest/user_guide/vault.html#playbooks-vault][Vault]] (password managemnt)
+ Ansible [[https://docs.ansible.com/ansible/latest/collections/community/general/index.html][Community Modules]]

*** Resources
+ Start Here:
  + [[https://docs.ansible.com/ansible/latest/user_guide/playbooks.html][Working With Playbooks]] (from ansible docs)
  + [[https://wiki.dd-wrt.com/wiki/index.php/VLAN_Detached_Networks_%28Separate_Networks_With_Internet%29][Example Playbooks]]

**** Configuration
+ Example [[https://github.com/ansible/ansible/blob/devel/examples/ansible.cfg][ansible.cfg]]
+ Ansible [[https://docs.ansible.com/ansible-core/devel/reference_appendices/config.html#ansible-configuration-settings][Environment Vars]]

**** _calvinr
+ Ansible AWX/Tower [[https://gitlab.com/_calvinr/networking/automation_examples/ansible/ansible-tower-awx-cheat-sheet][deploy cheatsheet]]
+ Migration: [[https://gitlab.com/_calvinr/networking/automation_examples/nornir/SNMP_migration][SNMPv2 to SNMPv3]]
+ [[https://gitlab.com/_calvinr/networking][_calvinr/networking]] examples of automating Juniper gear
  - Follows along with these videos from [[https://www.youtube.com/c/CalvinRemsburg0][Calvin Remsburg]]
  - Firewall Configs: [[https://gitlab.com/_calvinr/networking/ansible-firewall-configuration/-/blob/master/files/ansible/config/complete/alderaan.conf][alderaan.conf]] and [[https://gitlab.com/_calvinr/networking/ansible-firewall-configuration/-/blob/master/files/ansible/config/complete/jakku.conf][jakku.conf]]
+ _calvinr: [[https://gitlab.com/_calvinr/networking/automation_examples/ansible?sort=latest_activity_desc][ansible projects]]

**** Projects
***** Route/Switch
+ [[https://github.com/sfloess-archives/scripts/tree/master/ansible][sfloess-archives/scripts]] (ansible scripts)
  - [[https://github.com/FlossWare-Archives/scripts/tree/master/ansible/redhat][Flossware]]: project to build OpenWRT and DD-WRT on Redhat servers
+ [[https://github.com/varunpalekar/ansible-structure][varunpalekar/ansible-structure]] (example project structure)
***** VM/Proxmox
+ [[https://vectops.com/2020/01/provision-proxmox-vms-with-ansible-quick-and-easy/][Provision proxmox vm's with ansible]]
+ Ansible Community [[https://docs.ansible.com/ansible/latest/collections/community/general/proxmox_module.html][Proxmox Module]]
  - use guix to create images
  - use proxmox to create VM/Container Templates
  - use ansible as a =make= or =rake= tool
    * mostly for its configuration management
    * and infrastructure-as-code capacity for documentation

**** Galaxy
+ [[https://galaxy.ansible.com/dzervas/router][Ansible Role for Linux Router]]
+ [[https://galaxy.ansible.com/docs/finding/search.html#finding-ansible-content][Finding Ansible Content]] (search, community, partners)

*** Issues
+ [[https://k21academy.com/ansible/roles/][Creating Ansible Roles]]

* Virtualization Platforms
** vSphere
** Proxmox
*** Docs
*** Resources
+ [[https://forum.proxmox.com/][Forums]]

**** Networking
+ [[https://pve.proxmox.com/pve-docs/chapter-pvesdn.html][SDN docs]]
**** Storage
+ 2012 monograph on [[https://pthree.org/2012/12/05/zfs-administration-part-ii-raidz/][ZFS administration]]

* Virtualization
:PROPERTIES:
:ID:       cf2bd101-8e99-4a31-bbdc-a67949389b40
:END:

** QEMU

+ [[https://wiki.archlinux.org/title/QEMU/Guest_graphics_acceleration][QEMU graphics accel]] (wiki)
+ [[https://alyssa.is/using-virtio-wl/][A technical overview of Virtio WL]] (qemu/libvirt)
+ [[https://developer.ibm.com/articles/l-virtio/][VirtIO an I/O virtualization framework]]




** Libvirt


*** Tools
+ virt-manager

+ virsh

+ virt-install

** Admin Tools
+ dnsmasq :: dns
+ dhclient :: dhcp
+ dmidecode :: SMBIOS table, hardware compat/interoperability
+ ebtables :: NAT networking on the host
+ bridge-utils :: create virtual networking devices: TUN/TAP, bridge
