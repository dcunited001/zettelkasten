:PROPERTIES:
:ID:       c50c698d-a10d-4b01-8369-495c8f5e0439
:END:
#+TITLE: Cheatsheet: Less Keybindings
#+CATEGORY: slips
#+TAGS:
#+OPTIONS: ':nil *:t -:t ::t <:t H:3 \n:nil ^:t arch:headline
#+OPTIONS: title:t author:nil c:nil d:(not "LOGBOOK") date:nil
#+OPTIONS: e:t email:nil f:t inline:t num:t p:nil pri:nil stat:t
#+OPTIONS: tags:t tasks:t tex:t timestamp:t todo:t |:t
#+OPTIONS: toc:nil

This is derived from the =less= help output.

The tables still have the descriptions to the right, but the simplest keys are
closest with more complex keys to the left. A few keybindings with longer
descriptions were pushed left to keep tables compact.

+ More info on less can be found at [[https://www.greenwoodsoftware.com/less/faq.html#tricks][greenwoodsoftware.com]]
+ The less docs are found in [[https://github.com/gwsw/less/blob/master/less.hlp][less.hlp]] and [[https://github.com/gwsw/less/blob/master/less.nro][less.nro]] in the repository mirror or
  gzip tar archive.
+ [[https://sheet.shiar.nl/][Shiar's Cheat Sheets]] has a graphical layout of [[https://sheet.shiar.nl/less][less keyboard shortcuts]]. These
  are printable. See an   [[file:shiar.nl-less-keyboard-cheat-sheet.pdf][example PDF for Less]].[fn:1]
  - There are other useful keybinding references, like [[https://sheet.shiar.nl/readline][Readline]] (bash, python
    console) and [[https://sheet.shiar.nl/screen][Screen]]

#+begin_export html
<style type="text/css" media="screen">
tr:nth-child(odd) { background-color: rgb(0 62 70 / 0.2); }
/* tr:nth-child(even) { background-color: rgb(34 26 146 / 0.1); } */

td:nth-child(odd) { background-color: rgb(34 62 146 / 0.2); }
td:nth-child(even) { background-color: rgb(0 26 70 / 0.1); }
</style>
#+end_export

* Roam :noexport:
+ [[id:cf847bc5-31f7-4bb8-8324-7680a8f2953d][Shell]]
+ [[id:bdae77b1-d9f0-4d3a-a2fb-2ecdab5fd531][Linux]]
+ [[id:3d2330da-5a95-408a-b940-7d2b3b0c7fb2][Keyboard]]

* Less

Commands marked with ~*~ may be preceded by a number, ~N~. Notes in parentheses
indicate the behavior if ~N~ is given. A key preceded by a caret indicates the
Ctrl key; thus ~^K~ is ~ctrl-K~.

|    |    |   | H  | h | Display this help. |
| ZZ | :Q | Q | :q | q | Exit.              |

** Moving

| CR    | ~^N~ | j  | ~^E~ | e | * | Forward  one line   (or N lines).                    |
| ~^P~    | ~^K~ | k  | ~^Y~ | y | * | Backward one line   (or N lines).                    |
| SPACE |    | ~^V~ | ~^F~ | f | * | Forward  one window (or N lines).                    |
| ~ESC-v~ |    |    | ~^B~ | b | * | Backward one window (or N lines).                    |
|       |    |    |    | z | * | Forward  one window (and set window to N).           |
|       |    |    |    | w | * | Backward one window (and set window to N).           |
|       |    |    | ~^D~ | d | * | Forward  one half-window (and set half-window to N). |
|       |    |    | ~^U~ | u | * | Backward one half-window (and set half-window to N). |
|       |    |    |    | R |   | Repaint screen, discarding buffered input.           |
|       |    | ~^L~ | ~^R~ | r |   | Repaint screen.                                      |
|       |    |    |    | F |   | Forward forever; like "tail -f".                     |

*** When =ESC= Is Your Only =META=

| ~ESC-SPACE~ | * | Forward one window, but don't stop at end-of-file. |
| ~ESC-) →~   | * | Right one half screen width (or N positions).      |
| ~ESC-( ←~   | * | Left  one half screen width (or N positions).      |
| ~ESC-} ^→~  |   | Right to last column displayed.                    |
| ~ESC-{ ^←~  |   | Left  to first column.                             |
| ~ESC-F~     |   | Like F but stop when search pattern is found.      |

** Searching

|      | /pattern | * | Search forward for (N-th) matching line.               |
|      | ?pattern | * | Search backward for (N-th) matching line.              |
|      | n        | * | Repeat previous search (for N-th occurrence).          |
|      | N        | * | Repeat previous search in reverse direction.           |
|      | ~ESC-n~    | * | Repeat previous search, spanning files.                |
|      | ~ESC-N~    | * | Repeat previous search, reverse dir. & spanning files. |
| ~^O n~ | ~^O ^N~    | * | Search forward for (N-th) OSC8 hyperlink.              |
| ~^O p~ | ~^O ^P~    | * | Search backward for (N-th) OSC8 hyperlink.             |
| ~^O l~ | ~^O ^L~    |   | Jump to the currently selected OSC8 hyperlink.         |
|      | ~ESC-u~    |   | Undo (toggle) search highlighting.                     |
|      | ~ESC-U~    |   | Clear search highlighting.                             |
|      | &pattern | * | Display only matching lines.                           |

*** Search Patterns

A search pattern may begin with one or more of:

| ~^N~   | ~!~ | Search for NON-matching lines.                           |
| ~^E~   | ~*~ | Search multiple files (pass thru END OF FILE).           |
| ~^F~   | ~@~ | Start search at FIRST file (for /) or last file (for ?). |
| ~^K~   |   | Highlight matches, but don't move (KEEP position).       |
| ~^R~   |   | Don't use REGULAR EXPRESSIONS.                           |
| ~^S n~ |   | Search for match in n-th parenthesized subpattern.       |
| ~^W~   |   | WRAP search if no match found.                           |
| ~^L~   |   | Enter next character literally into pattern.             |

** Jumping

| ~ESC->~ | > | G | * | Go to first line in file (or line N).             |
| ~ESC-<~ | < | g | * | Go to last line in file (or line N).              |
|       | % | p | * | Go to beginning of file (or N percent into file). |
|       |   | t | * | Go to the (N-th) next tag.                        |
|       |   | T | * | Go to the (N-th) previous tag.                    |
| [     | ( | { | * | Find close bracket } ) ].                         |
| ]     | ) | } | * | Find open bracket { ( [.                          |

Generic

| ~ESC-^F <c1> <c2>~ | * | Find close bracket <c2>. |
| ~ESC-^B <c1> <c2>~ | * | Find open bracket <c1>.  |

Each "find close bracket" command goes forward to the close bracket
matching the (N-th) open bracket in the top line.
Each "find open bracket" command goes backward to the open bracket
matching the (N-th) close bracket in the bottom line.

| m<letter>     | Mark the current top line with <letter>.    |
| M<letter>     | Mark the current bottom line with <letter>. |
| '<letter>     | Go to a previously marked position.         |
| ''            | Go to the previous position.                |
| ~^X ^X~         | Same as '.                                  |
| ~ESC-m<letter>~ | Clear a mark.                               |

A mark is any upper-case or lower-case letter.
Certain marks are predefined:

| ~^~ | beginning of the file |
| ~$~ | end of the file       |

** Changing Files

|    |    | :e [file] |   | Examine a new file.                                     |
|    |    | ~^X ^V~     |   | Same as :e.                                             |
|    |    | :n        | * | Examine the (N-th) next file from the command line.     |
|    |    | :p        | * | Examine the (N-th) previous file from the command line. |
|    |    | :x        | * | Examine the first (or N-th) file from the command line. |
|    |    | ~^O ^O~     |   | Open the currently selected OSC8 hyperlink.             |
|    |    | :d        |   | Delete the current file from the command line list.     |
| :f | ~^G~ | ~=~         |   | Print current file name.                                |

** Commands

*** Flags

| -<flag>  | Toggle a command line option [see OPTIONS below]. |
| --<name> | Toggle a command line option, by name.            |
| _<flag>  | Display the setting of a command line option.     |
| __<name> | Display the setting of an option, by name.        |

*** Commands

| +cmd     | Execute the less cmd each time a new file is examined.   |
| !command | Execute the shell command with $SHELL.                   |
| #command | Execute the shell command, expanded like a prompt.       |
| Xcommand | Pipe file between current pos & mark X to shell command. |
| s file   | Save input to a file.                                    |
| v        | Edit the current file with $VISUAL or $EDITOR.           |

** Options

Most options may be changed either on the command line, or from within less by
using the ~-~ or ~--~ command. Options may be given in one of two forms: either a
single character preceded by a ~-~, or a name preceded by ~--~.

| -?            | --help                | Display help (from command line).                         |
| -a            | --search-skip-screen  | Search skips current screen.                              |
| -A            | --SEARCH-SKIP-SCREEN  | Search starts just after target line.                     |
| ~-b [N]~        | ~--buffers=[N]~         | Number of buffers.                                        |
| -B            | --auto-buffers        | Don't automatically allocate buffers for pipes.           |
| -c            | --clear-screen        | Repaint by clearing rather than scrolling.                |
| -d            | --dumb                | Dumb terminal.                                            |
| ~-D xcolor~     | ~--color=xcolor~        | Set screen colors.                                        |
| -e            | --quit-at-eof         | Quit at end of file.                                      |
| -E            | --QUIT-AT-EOF         |                                                           |
| -f            | --force               | Force open non-regular files.                             |
| -F            | --quit-if-one-screen  | Quit if entire file fits on first screen.                 |
| -g            | --hilite-search       | Highlight only last match for searches.                   |
| -G            | --HILITE-SEARCH       | Don't highlight any matches for searches.                 |
| ~-h [N]~        | ~--max-back-scroll=[N]~ | Backward scroll limit.                                    |
| -i            | --ignore-case         | Ignore case in searches that do not contain uppercase.    |
| -I            | --IGNORE-CASE         | Ignore case in all searches.                              |
| ~-j [N]~        | ~--jump-target=[N]~     | Screen position of target lines.                          |
| -J            | --status-column       | Display a status column at left edge of screen.           |
| ~-k file~       | ~--lesskey-file=file~   | Use a compiled lesskey file.                              |
| -K            | --quit-on-intr        | Exit less in response to ctrl-C.                          |
| -L            | --no-lessopen         | Ignore the LESSOPEN environment variable.                 |
| -m            | --long-prompt         | Set prompt style.                                         |
| -M            | --LONG-PROMPT         |                                                           |
| -n            | --line-numbers        | Suppress line numbers in prompts and messages.            |
| -N            | --LINE-NUMBERS        | Display line number at start of each line.                |
| ~-o [file]~     | ~--log-file=[file]~     | Copy to log file (standard input only).                   |
| ~-O [file]~     | ~--LOG-FILE=[file]~     | Copy to log file (unconditionally overwrite).             |
| ~-p pattern~    | ~--pattern=[pattern]~   | Start at pattern (from command line).                     |
| ~-P [prompt]~   | ~--prompt=[prompt]~     | Define new prompt.                                        |
| -q            | --quiet  --silent     | Quiet the terminal bell.                                  |
| -Q            | --QUIET --SILENT      |                                                           |
| -r            | --raw-control-chars   | Output "raw" control characters.                          |
| -R            | --RAW-CONTROL-CHARS   |                                                           |
| -s            | --squeeze-blank-lines | Squeeze multiple blank lines.                             |
| -S            | --chop-long-lines     | Chop (truncate) long lines rather than wrapping.          |
| ~-t tag~        | ~--tag=[tag]~           | Find a tag.                                               |
| ~-T [tagsfile]~ | ~--tag-file=[tagsfile]~ | Use an alternate tags file.                               |
| -u            | --underline-special   | Change handling of backspaces, tabs and carriage returns. |
| -U            | --UNDERLINE-SPECIAL   |                                                           |
| -V            | --version             | Display the version number of "less".                     |
| -w            | --hilite-unread       | Highlight first new line after forward-screen.            |
| -W            | --HILITE-UNREAD       | Highlight first new line after any forward movement.      |
| ~-x [N[,...]]~  | ~--tabs=[N[,...]]~      | Set tab stops.                                            |
| -X            | --no-init             | Don't use termcap init/deinit strings.                    |
| ~-y [N]~        | ~--max-forw-scroll=[N]~ | Forward scroll limit.                                     |
| ~-z [N]~        | ~--window=[N]~          | Set size of window.                                       |
| ~-" [c[c]]~     | ~--quotes=[c[c]]~       | Set shell quote characters.                               |
| -~            | --tilde               | Don't display tildes after end of file.                   |
| ~-# [N]~        | ~--shift=[N]~           | Set horizontal scroll amount (0 = one half screen width). |

Long options

| --exit-follow-on-close     | Exit F command on a pipe when writer closes pipe.             |
| --file-size                | Automatically determine the size of the input file.           |
| --follow-name              | The F command changes files if the input file is renamed.     |
| --header=[L[,C[,N]]]       | Use L lines (starting at line N) and C columns as headers.    |
| --incsearch                | Search file as each pattern character is typed in.            |
| --intr=[C]                 | Use C instead of ^X to interrupt a read.                      |
| --lesskey-context=text     | Use lesskey source file contents.                             |
| --lesskey-src=file         | Use a lesskey source file.                                    |
| --line-num-width=[N]       | Set the width of the -N line number field to N characters.    |
| --match-shift=[N]          | Show at least N characters to the left of a search match.     |
| --modelines=[N]            | Read N lines from the input file and look for vim modelines.  |
| --mouse                    | Enable mouse input.                                           |
| --no-keypad                | Don't send termcap keypad init/deinit strings.                |
| --no-histdups              | Remove duplicates from command history.                       |
| --no-number-headers        | Don't give line numbers to header lines.                      |
| --no-search-header-lines   | Searches do not include header lines.                         |
| --no-search-header-columns | Searches do not include header columns.                       |
| --no-search-headers        | Searches do not include header lines or columns.              |
| --no-vbell                 | Disable the terminal's visual bell.                           |
| --redraw-on-quit           | Redraw final screen when quitting.                            |
| --rscroll=[C]              | Set the character used to mark truncated lines.               |
| --save-marks               | Retain marks across invocations of less.                      |
| --search-options=[EFKNRW-] | Set default options for every search.                         |
| --show-preproc-errors      | Display a message if preprocessor exits with an error status. |
| --proc-backspace           | Process backspaces for bold/underline.                        |
| --PROC-BACKSPACE           | Treat backspaces as control characters.                       |
| --proc-return              | Delete carriage returns before newline.                       |
| --PROC-RETURN              | Treat carriage returns as control characters.                 |
| --proc-tab                 | Expand tabs to spaces.                                        |
| --PROC-TAB                 | Treat tabs as control characters.                             |
| --status-col-width=[N]     | Set the width of the -J status column to N characters.        |
| --status-line              | Highlight or color the entire line containing a mark.         |
| --use-backslash            | Subsequent options use backslash as escape char.              |
| --use-color                | Enables colored text.                                         |
| --wheel-lines=[N]          | Each click of the mouse wheel moves N lines.                  |
| --wordwrap                 | Wrap lines at spaces.                                         |

   ** Line Editing

These keys can be used to edit text being entered
on the "command line" at the bottom of the screen|

| RightArrow      |                   | ESC-l   | Move cursor right one character   |
| LeftArrow       |                   | ESC-h   | Move cursor left one character    |
| ctrl-RightArrow | ESC-RightArrow    | ESC-w   | Move cursor right one word        |
| ctrl-LeftArrow  | ESC-LeftArrow     | ESC-b   | Move cursor left one word         |
| HOME            |                   | ESC-0   | Move cursor to start of line      |
| END             |                   | ESC-$   | Move cursor to end of line        |
| BACKSPACE       |                   |         | Delete char to left of cursor     |
| DELETE          |                   | ESC-x   | Delete char under cursor          |
| ctrl-BACKSPACE  | ESC-BACKSPACE     |         | Delete word to left of cursor     |
| ctrl-DELETE     | ESC-DELETE        | ESC-X   | Delete word under cursor          |
| ctrl-U          | ESC (MS-DOS only) |         | Delete entire line                |
| UpArrow         |                   | ESC-k   | Retrieve previous command line    |
| DownArrow       |                   | ESC-j   | Retrieve next command line        |
| TAB             |                   |         | Complete filename & cycle         |
| SHIFT-TAB       |                   | ESC-TAB | Complete filename & reverse cycle |
| ctrl-L          |                   |         | Complete filename, list all       |

* Footnotes

[fn:1] The CSS needs a bit of hinting to get a color print, though I lost the
    original HTML/CSS modifications. 

    #+begin_export html
    <br/></br>
    <!-- example of multi-line footnotes compatible with both html/pdf org exports -->
    <!-- a bit pedantic, but it's also difficult to find the correct answer  -->
    #+end_export

    #+begin_export latex
    \par
    #+end_export

    The PDF has clickable links to source, so I think that suffices for
    attribution. The site includes the Perl source code used to generate them.
    Sources required online, in one way or another, since the service is AGPLv3.
