<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Sun Oct 19 14:47:56 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SYSTEMD&minus;ANALYZE</title>

</head>
<body>

<h1 align="center">SYSTEMD&minus;ANALYZE</h1>









































<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; ">systemd-analyze
&minus; Analyze and debug system manager</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] [time]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] blame</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] critical&minus;chain [<i>UNIT</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] dump [<i>PATTERN</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] plot [&gt;file.svg]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] dot [<i>PATTERN</i>...] [&gt;file.dot]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] unit&minus;files</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] unit&minus;paths</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] exit&minus;status [<i>STATUS</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] capability [<i>CAPABILITY</i>... |
{&minus;m&nbsp;|&nbsp;&minus;&minus;mask}&nbsp;<i>MASK</i>]</p> </td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] condition <i>CONDITION</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] syscall&minus;filter [<i>SET</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] filesystems [<i>SET</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] calendar <i>SPEC</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] timestamp <i>TIMESTAMP</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] timespan <i>SPAN</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] cat&minus;config <i>NAME</i>|<i>PATH</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] compare&minus;versions <i>VERSION1</i>
[<i>OP</i>] <i>VERSION2</i></p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] verify <i>FILE</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] security [<i>UNIT</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] inspect&minus;elf <i>FILE</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] malloc [<i>D&minus;BUS&nbsp;SERVICE</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] fdstore <i>UNIT</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] image&minus;policy <i>POLICY</i>...</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] has&minus;tpm2</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] pcrs [<i>PCR</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] srk [<i>&gt;FILE</i>]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] architectures [<i>NAME</i>...]</p></td>
<td width="4%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="87%">


<p style=""><b>systemd&minus;analyze</b>
[OPTIONS...] smbios11</p></td>
<td width="4%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p class="mandt"><b>systemd&minus;analyze</b>
may be used to determine system boot&minus;up performance
statistics and retrieve other state and tracing information
from the system and service manager, and to verify the
correctness of unit files. It is also used to access special
functions useful for advanced system manager debugging.</p>

<p style="margin-left:9%; ">If no command is
passed, <b>systemd&minus;analyze time</b> is implied.</p>

<h3>systemd&minus;analyze time
<a name="systemd&minus;analyze time"></a>
</h3>


<p style="margin-left:9%; ">This command
prints the time spent in the kernel before userspace has
been reached, the time spent in the initrd before normal
system userspace has been reached, and the time normal
system userspace took to initialize. Note that these
measurements simply measure the time passed up to the point
where all system services have been spawned, but not
necessarily until they fully finished initialization or the
disk is idle.</p>


<p class="mandt"><b>Example&nbsp;1.&nbsp;Show
how long the boot took</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze time # in a container
Startup finished in 296ms (userspace)
multi-user.target reached after 275ms in userspace

$ systemd-analyze time # on a real machine
Startup finished in 2.584s (kernel) + 19.176s (initrd) + 47.847s (userspace) = 1min 9.608s
multi-user.target reached after 47.820s in userspace</pre>

<h3>systemd&minus;analyze blame
<a name="systemd&minus;analyze blame"></a>
</h3>


<p style="margin-left:9%; ">This command
prints a list of all running units, ordered by the time they
took to initialize. This information may be used to optimize
boot&minus;up times. Note that the output might be
misleading as the initialization of one service might be
slow simply because it waits for the initialization of
another service to complete. Also note:
<b>systemd&minus;analyze blame</b> does not display results
for services with <i>Type=simple</i>, because systemd
considers such services to be started immediately, hence no
measurement of the initialization delays can be done. Also
note that this command only shows the time units took for
starting up, it does not show how long unit jobs spent in
the execution queue. In particular it shows the time units
spent in &quot;activating&quot; state, which is not defined
for units such as device units that transition directly from
&quot;inactive&quot; to &quot;active&quot;. This command
hence gives an impression of the performance of program
code, but cannot accurately reflect latency introduced by
waiting for hardware and similar events.</p>


<p class="mandt"><b>Example&nbsp;2.&nbsp;Show
which units took the most time during boot</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze blame
         32.875s pmlogger.service
         20.905s systemd-networkd-wait-online.service
         13.299s dev-vda1.device
         ...
            23ms sysroot.mount
            11ms initrd-udevadm-cleanup-db.service
             3ms sys-kernel-config.mount</pre>

<h3>systemd&minus;analyze critical&minus;chain [UNIT...]
<a name="systemd&minus;analyze critical&minus;chain [UNIT...]"></a>
</h3>


<p style="margin-left:9%; ">This command
prints a tree of the time&minus;critical chain of units (for
each of the specified <i>UNIT</i>s or for the default target
otherwise). The time after the unit is active or started is
printed after the &quot;@&quot; character. The time the unit
takes to start is printed after the &quot;+&quot; character.
Note that the output might be misleading as the
initialization of services might depend on socket activation
and because of the parallel execution of units. Also,
similarly to the <b>blame</b> command, this only takes into
account the time units spent in &quot;activating&quot;
state, and hence does not cover units that never went
through an &quot;activating&quot; state (such as device
units that transition directly from &quot;inactive&quot; to
&quot;active&quot;). Moreover, it does not show information
on jobs (and in particular not jobs that timed out).</p>


<p class="mandt"><b>Example&nbsp;3.&nbsp;systemd&minus;analyze
critical&minus;chain</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze critical-chain
multi-user.target @47.820s
└─pmie.service @35.968s +548ms
  └─pmcd.service @33.715s +2.247s
    └─network-online.target @33.712s
      └─systemd-networkd-wait-online.service @12.804s +20.905s
        └─systemd-networkd.service @11.109s +1.690s
          └─systemd-udevd.service @9.201s +1.904s
            └─systemd-tmpfiles-setup-dev.service @7.306s +1.776s
              └─kmod-static-nodes.service @6.976s +177ms
                └─systemd-journald.socket
                  └─system.slice
                    └─-.slice</pre>

<h3>systemd&minus;analyze dump [pattern...]
<a name="systemd&minus;analyze dump [pattern...]"></a>
</h3>


<p style="margin-left:9%; ">Without any
parameter, this command outputs a (usually very long)
human&minus;readable serialization of the complete service
manager state. Optional glob pattern may be specified,
causing the output to be limited to units whose names match
one of the patterns. The output format is subject to change
without notice and should not be parsed by applications.
This command is rate limited for unprivileged users.</p>


<p class="mandt"><b>Example&nbsp;4.&nbsp;Show
the internal state of user manager</b></p>

<pre style="margin-left:14%; ">
$ systemd-analyze --user dump
Timestamp userspace: Thu 2019-03-14 23:28:07 CET
Timestamp finish: Thu 2019-03-14 23:28:07 CET
Timestamp generators-start: Thu 2019-03-14 23:28:07 CET
Timestamp generators-finish: Thu 2019-03-14 23:28:07 CET
Timestamp units-load-start: Thu 2019-03-14 23:28:07 CET
Timestamp units-load-finish: Thu 2019-03-14 23:28:07 CET
-> Unit proc-timer_list.mount:
        Description: /proc/timer_list
        ...
-> Unit default.target:
        Description: Main user target
...</pre>

<h3>systemd&minus;analyze malloc [D&minus;Bus service...]
<a name="systemd&minus;analyze malloc [D&minus;Bus service...]"></a>
</h3>


<p style="margin-left:9%; ">This command can
be used to request the output of the internal memory state
(as returned by <b>malloc_info</b>(3)) of a D&minus;Bus
service. If no service is specified, the query will be sent
to org.freedesktop.systemd1 (the system or user service
manager). The output format is not guaranteed to be stable
and should not be parsed by applications.</p>

<p style="margin-left:9%; ">The service must
implement the org.freedesktop.MemoryAllocation1 interface.
In the systemd suite, it is currently only implemented by
the manager.</p>

<h3>systemd&minus;analyze plot
<a name="systemd&minus;analyze plot"></a>
</h3>


<p style="margin-left:9%; ">This command
prints either an SVG graphic, detailing which system
services have been started at what time, highlighting the
time they spent on initialization, or the raw time data in
JSON or table format.</p>


<p class="mandt"><b>Example&nbsp;5.&nbsp;Plot
a bootchart</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze plot >bootup.svg
$ eog bootup.svg</pre>

<p style="margin-left:9%; ">Note that this
plot is based on the most recent per&minus;unit timing data
of loaded units. This means that if a unit gets started,
then stopped and then started again the information shown
will cover the most recent start cycle, not the first one.
Thus it is recommended to consult this information only
shortly after boot, so that this distinction does not
matter. Moreover, units that are not referenced by any other
unit through a dependency might be unloaded by the service
manager once they terminate (and did not fail). Such units
will not show up in the plot.</p>

<h3>systemd&minus;analyze dot [pattern...]
<a name="systemd&minus;analyze dot [pattern...]"></a>
</h3>


<p style="margin-left:9%; ">This command
generates textual dependency graph description in dot format
for further processing with the GraphViz <b>dot</b>(1) tool.
Use a command line like <b>systemd&minus;analyze dot | dot
&minus;Tsvg &gt;systemd.svg</b> to generate a graphical
dependency tree. Unless <b>&minus;&minus;order</b> or
<b>&minus;&minus;require</b> is passed, the generated graph
will show both ordering and requirement dependencies.
Optional pattern globbing style specifications (e.g.
*.target) may be given at the end. A unit dependency is
included in the graph if any of these patterns match either
the origin or destination node.</p>


<p class="mandt"><b>Example&nbsp;6.&nbsp;Plot
all dependencies of any unit whose name starts with
&quot;avahi&minus;daemon&quot;</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze dot 'avahi-daemon.*' | dot -Tsvg >avahi.svg
$ eog avahi.svg</pre>


<p class="mandt"><b>Example&nbsp;7.&nbsp;Plot
the dependencies between all known target units</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze dot --to-pattern='*.target' --from-pattern='*.target' \
      | dot -Tsvg >targets.svg
$ eog targets.svg</pre>

<h3>systemd&minus;analyze unit&minus;paths
<a name="systemd&minus;analyze unit&minus;paths"></a>
</h3>


<p style="margin-left:9%; ">This command
outputs a list of all directories from which unit files, .d
overrides, and .wants, .requires symlinks may be loaded.
Combine with <b>&minus;&minus;user</b> to retrieve the list
for the user manager instance, and
<b>&minus;&minus;global</b> for the global configuration of
user manager instances.</p>


<p class="mandt"><b>Example&nbsp;8.&nbsp;Show
all paths for generated units</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze unit-paths | grep '^/run'
/run/systemd/system.control
/run/systemd/transient
/run/systemd/generator.early
/run/systemd/system
/run/systemd/system.attached
/run/systemd/generator
/run/systemd/generator.late</pre>

<p style="margin-left:9%; ">Note that this
verb prints the list that is compiled into
<b>systemd&minus;analyze</b> itself, and does not
communicate with the running manager. Use</p>

<pre style="margin-left:14%; ">systemctl [--user] [--global] show -p UnitPath --value</pre>

<p style="margin-left:9%; ">to retrieve the
actual list that the manager uses, with any empty
directories omitted.</p>

<h3>systemd&minus;analyze exit&minus;status [STATUS...]
<a name="systemd&minus;analyze exit&minus;status [STATUS...]"></a>
</h3>


<p style="margin-left:9%; ">This command
prints a list of exit statuses along with their
&quot;class&quot;, i.e. the source of the definition (one of
&quot;glibc&quot;, &quot;systemd&quot;, &quot;LSB&quot;, or
&quot;BSD&quot;), see the Process Exit Codes section in
<b>systemd.exec</b>(5). If no additional arguments are
specified, all known statuses are shown. Otherwise, only the
definitions for the specified codes are shown.</p>


<p class="mandt"><b>Example&nbsp;9.&nbsp;Show
some example exit status names</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze exit-status 0 1 {63..65}
NAME    STATUS CLASS
SUCCESS 0      glibc
FAILURE 1      glibc
-       63     -
USAGE   64     BSD
DATAERR 65     BSD</pre>

<h3>systemd&minus;analyze capability [CAPABILITY... | {&minus;m&nbsp;|&nbsp;&minus;&minus;mask}&nbsp;MASK]
<a name="systemd&minus;analyze capability [CAPABILITY... | {&minus;m&nbsp;|&nbsp;&minus;&minus;mask}&nbsp;MASK]"></a>
</h3>


<p style="margin-left:9%; ">This command
prints a list of Linux capabilities along with their numeric
IDs. See <b>capabilities</b>(7) for details. If no argument
is specified the full list of capabilities known to the
service manager and the kernel is shown. Capabilities
defined by the kernel but not known to the service manager
are shown as &quot;cap_???&quot;. Optionally, if arguments
are specified they may refer to specific cabilities by name
or numeric ID, in which case only the indicated capabilities
are shown in the table.</p>

<p style="margin-left:9%; ">Alternatively,
if <b>&minus;&minus;mask</b> is passed, a single numeric
argument must be specified, which is interpreted as a
hexadecimal capability mask. In this case, only the
capabilities present in the mask are shown in the table.
This mode is intended to aid in decoding capability sets
available via various debugging interfaces (e.g.
&quot;/proc/PID/status&quot;).</p>


<p class="mandt"><b>Example&nbsp;10.&nbsp;Show
some example capability names</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze capability 0 1 {30..32}
NAME              NUMBER
cap_chown              0
cap_dac_override       1
cap_audit_control     30
cap_setfcap           31
cap_mac_override      32</pre>


<p class="mandt"><b>Example&nbsp;11.&nbsp;Decode
a capability mask extracted from /proc</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze capability -m 0000000000003c00
NAME                 NUMBER
cap_net_bind_service     10
cap_net_broadcast        11
cap_net_admin            12
cap_net_raw              13</pre>

<h3>systemd&minus;analyze condition CONDITION...
<a name="systemd&minus;analyze condition CONDITION..."></a>
</h3>


<p style="margin-left:9%; ">This command
will evaluate <i>Condition*=...</i> and <i>Assert*=...</i>
assignments, and print their values, and the resulting value
of the combined condition set. See <b>systemd.unit</b>(5)
for a list of available conditions and asserts.</p>


<p class="mandt"><b>Example&nbsp;12.&nbsp;Evaluate
conditions that check kernel versions</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze condition 'ConditionVersion = ! <4.0' \
        'ConditionVersion = >=5.1' \
        'ConditionACPower=|false' \
        'ConditionArchitecture=|!arm' \
        'AssertPathExists=/etc/os-release'
test.service: AssertPathExists=/etc/os-release succeeded.
Asserts succeeded.
test.service: ConditionArchitecture=|!arm succeeded.
test.service: ConditionACPower=|false failed.
test.service: ConditionVersion=>=5.1 succeeded.
test.service: ConditionVersion=!<4.0 succeeded.
Conditions succeeded.</pre>

<h3>systemd&minus;analyze syscall&minus;filter [SET...]
<a name="systemd&minus;analyze syscall&minus;filter [SET...]"></a>
</h3>


<p style="margin-left:9%; ">This command
will list system calls contained in the specified system
call set <i>SET</i>, or all known sets if no sets are
specified. Argument <i>SET</i> must include the
&quot;@&quot; prefix.</p>

<h3>systemd&minus;analyze filesystems [SET...]
<a name="systemd&minus;analyze filesystems [SET...]"></a>
</h3>


<p style="margin-left:9%; ">This command
will list filesystems in the specified filesystem set
<i>SET</i>, or all known sets if no sets are specified.
Argument <i>SET</i> must include the &quot;@&quot;
prefix.</p>

<h3>systemd&minus;analyze calendar EXPRESSION...
<a name="systemd&minus;analyze calendar EXPRESSION..."></a>
</h3>


<p style="margin-left:9%; ">This command
will parse and normalize repetitive calendar time events,
and will calculate when they elapse next. This takes the
same input as the <i>OnCalendar=</i> setting in
<b>systemd.timer</b>(5), following the syntax described in
<b>systemd.time</b>(7). By default, only the next time the
calendar expression will elapse is shown; use
<b>&minus;&minus;iterations=</b> to show the specified
number of next times the expression elapses. Each time the
expression elapses forms a timestamp, see the
<b>timestamp</b> verb below.</p>


<p class="mandt"><b>Example&nbsp;13.&nbsp;Show
leap days in the near future</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze calendar --iterations=5 '*-2-29 0:0:0'
  Original form: *-2-29 0:0:0
Normalized form: *-02-29 00:00:00
    Next elapse: Sat 2020-02-29 00:00:00 UTC
       From now: 11 months 15 days left
       Iter. #2: Thu 2024-02-29 00:00:00 UTC
       From now: 4 years 11 months left
       Iter. #3: Tue 2028-02-29 00:00:00 UTC
       From now: 8 years 11 months left
       Iter. #4: Sun 2032-02-29 00:00:00 UTC
       From now: 12 years 11 months left
       Iter. #5: Fri 2036-02-29 00:00:00 UTC
       From now: 16 years 11 months left</pre>

<h3>systemd&minus;analyze timestamp TIMESTAMP...
<a name="systemd&minus;analyze timestamp TIMESTAMP..."></a>
</h3>


<p style="margin-left:9%; ">This command
parses a timestamp (i.e. a single point in time) and outputs
the normalized form and the difference between this
timestamp and now. The timestamp should adhere to the syntax
documented in <b>systemd.time</b>(7), section &quot;PARSING
TIMESTAMPS&quot;.</p>


<p class="mandt"><b>Example&nbsp;14.&nbsp;Show
parsing of timestamps</b></p>

<pre style="margin-left:14%; ">
$ systemd-analyze timestamp yesterday now tomorrow
  Original form: yesterday
Normalized form: Mon 2019-05-20 00:00:00 CEST
       (in UTC): Sun 2019-05-19 22:00:00 UTC
   UNIX seconds: @15583032000
       From now: 1 day 9h ago

  Original form: now
Normalized form: Tue 2019-05-21 09:48:39 CEST
       (in UTC): Tue 2019-05-21 07:48:39 UTC
   UNIX seconds: @1558424919.659757
       From now: 43us ago

  Original form: tomorrow
Normalized form: Wed 2019-05-22 00:00:00 CEST
       (in UTC): Tue 2019-05-21 22:00:00 UTC
   UNIX seconds: @15584760000
       From now: 14h left</pre>

<h3>systemd&minus;analyze timespan EXPRESSION...
<a name="systemd&minus;analyze timespan EXPRESSION..."></a>
</h3>


<p style="margin-left:9%; ">This command
parses a time span (i.e. a difference between two
timestamps) and outputs the normalized form and the
equivalent value in microseconds. The time span should
adhere to the syntax documented in <b>systemd.time</b>(7),
section &quot;PARSING TIME SPANS&quot;. Values without units
are parsed as seconds.</p>


<p class="mandt"><b>Example&nbsp;15.&nbsp;Show
parsing of timespans</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze timespan 1s 300s '1year 0.000001s'
Original: 1s
      μs: 1000000
   Human: 1s

Original: 300s
      μs: 300000000
   Human: 5min

Original: 1year 0.000001s
      μs: 31557600000001
   Human: 1y 1us</pre>

<h3>systemd&minus;analyze cat&minus;config NAME|PATH...
<a name="systemd&minus;analyze cat&minus;config NAME|PATH..."></a>
</h3>


<p style="margin-left:9%; ">This command is
similar to <b>systemctl cat</b>, but operates on config
files. It will copy the contents of a config file and any
drop&minus;ins to standard output, using the usual systemd
set of directories and rules for precedence. Each argument
must be either an absolute path including the prefix (such
as /etc/systemd/logind.conf or
/usr/lib/systemd/logind.conf), or a name relative to the
prefix (such as systemd/logind.conf).</p>


<p class="mandt"><b>Example&nbsp;16.&nbsp;Showing
logind configuration</b></p>

<pre style="margin-left:14%; ">
$ systemd-analyze cat-config systemd/logind.conf
# /etc/systemd/logind.conf
...
[Login]
NAutoVTs=8
...

# /usr/lib/systemd/logind.conf.d/20-test.conf
... some override from another package

# /etc/systemd/logind.conf.d/50-override.conf
... some administrator override</pre>

<h3>systemd&minus;analyze compare&minus;versions VERSION1 [OP] VERSION2
<a name="systemd&minus;analyze compare&minus;versions VERSION1 [OP] VERSION2"></a>
</h3>


<p style="margin-left:9%; ">This command has
two distinct modes of operation, depending on whether the
operator <i>OP</i> is specified.</p>

<p style="margin-left:9%; ">In the first
mode &mdash; when <i>OP</i> is not specified &mdash;, it
will compare the two version strings and print either
&quot;<i>VERSION1</i> &lt; <i>VERSION2</i>&quot;, or
&quot;<i>VERSION1</i> == <i>VERSION2</i>&quot;, or
&quot;<i>VERSION1</i> &gt; <i>VERSION2</i>&quot; as
appropriate.</p>

<p style="margin-left:9%; ">The exit status
is <b>0</b> if the versions are equal, <b>11</b> if the
version of the right is smaller, and <b>12</b> if the
version of the left is smaller. (This matches the convention
used by <b>rpmdev&minus;vercmp</b>.)</p>

<p style="margin-left:9%; ">In the second
mode &mdash; when <i>OP</i> is specified &mdash; it will
compare the two version strings using the operation
<i>OP</i> and return <b>0</b> (success) if they condition is
satisfied, and <b>1</b> (failure) otherwise. <b>OP</b> may
be <b>lt</b>, <b>le</b>, <b>eq</b>, <b>ne</b>, <b>ge</b>,
<b>gt</b>. In this mode, no output is printed. (This matches
the convention used by <b>dpkg</b>(1)
<b>&minus;&minus;compare&minus;versions</b>.)</p>


<p class="mandt"><b>Example&nbsp;17.&nbsp;Compare
versions of a package</b></p>

<pre style="margin-left:14%; ">$ systemd-analyze compare-versions systemd-250~rc1.fc36.aarch64 systemd-251.fc36.aarch64
systemd-250~rc1.fc36.aarch64 < systemd-251.fc36.aarch64
$ echo $?
12

$ systemd-analyze compare-versions 1 lt 2; echo $?
0
$ systemd-analyze compare-versions 1 ge 2; echo $?
1</pre>

<h3>systemd&minus;analyze verify FILE...
<a name="systemd&minus;analyze verify FILE..."></a>
</h3>


<p style="margin-left:9%; ">This command
will load unit files and print warnings if any errors are
detected. Files specified on the command line will be
loaded, but also any other units referenced by them. A
unit's name on disk can be overridden by specifying an alias
after a colon; see below for an example. The full unit
search path is formed by combining the directories for all
command line arguments, and the usual unit load paths. The
variable <i>$SYSTEMD_UNIT_PATH</i> is supported, and may be
used to replace or augment the compiled in set of unit load
paths; see <b>systemd.unit</b>(5). All units files present
in the directories containing the command line arguments
will be used in preference to the other paths. If a template
unit without an instance name is specified (e.g.
foo@.service), &quot;test_instance&quot; will be used as the
instance name, which can be controlled by
<b>&minus;&minus;instance=</b> option.</p>

<p style="margin-left:9%; ">The following
errors are currently detected:</p>

<p style="margin-left:14%; ">&bull; unknown
sections and directives,</p>

<p style="margin-left:14%; ">&bull; missing
dependencies which are required to start the given unit,</p>

<p style="margin-left:14%; ">&bull; man
pages listed in <i>Documentation=</i> which are not found in
the system,</p>

<p style="margin-left:14%; ">&bull; commands
listed in <i>ExecStart=</i> and similar which are not found
in the system or not executable.</p>


<p class="mandt"><b>Example&nbsp;18.&nbsp;Misspelt
directives</b></p>

<pre style="margin-left:14%; ">
$ cat ./user.slice
[Unit]
WhatIsThis=11
Documentation=man:nosuchfile(1)
Requires=different.service

[Service]
Description=x

$ systemd-analyze verify ./user.slice
[./user.slice:9] Unknown lvalue 'WhatIsThis' in section 'Unit'
[./user.slice:13] Unknown section 'Service'. Ignoring.
Error: org.freedesktop.systemd1.LoadFailed:
   Unit different.service failed to load:
   No such file or directory.
Failed to create user.slice/start: Invalid argument
user.slice: man nosuchfile(1) command failed with code 16</pre>


<p class="mandt"><b>Example&nbsp;19.&nbsp;Missing
service units</b></p>

<pre style="margin-left:14%; ">
$ tail ./a.socket ./b.socket
==> ./a.socket <==
[Socket]
ListenStream=100

==> ./b.socket <==
[Socket]
ListenStream=100
Accept=yes

$ systemd-analyze verify ./a.socket ./b.socket
Service a.service not loaded, a.socket cannot be started.
Service b@0.service not loaded, b.socket cannot be started.</pre>

<pre style="margin-left:14%; ">$ cat /tmp/source
[Unit]
Description=Hostname printer

[Service]
Type=simple
ExecStart=/usr/bin/echo %H
MysteryKey=true

$ systemd-analyze verify /tmp/source
Failed to prepare filename /tmp/source: Invalid argument

$ systemd-analyze verify /tmp/source:alias.service
alias.service:7: Unknown key name 'MysteryKey' in section 'Service', ignoring.</pre>

<h3>systemd&minus;analyze security [UNIT...]
<a name="systemd&minus;analyze security [UNIT...]"></a>
</h3>


<p style="margin-left:9%; ">This command
analyzes the security and sandboxing settings of one or more
specified service units. If at least one unit name is
specified the security settings of the specified service
units are inspected and a detailed analysis is shown. If no
unit name is specified, all currently loaded,
long&minus;running service units are inspected and a terse
table with results shown. The command checks for various
security&minus;related service settings, assigning each a
numeric &quot;exposure level&quot; value, depending on how
important a setting is. It then calculates an overall
exposure level for the whole unit, which is an estimation in
the range 0.0...10.0 indicating how exposed a service is
security&minus;wise. High exposure levels indicate very
little applied sandboxing. Low exposure levels indicate
tight sandboxing and strongest security restrictions. Note
that this only analyzes the per&minus;service security
features systemd itself implements. This means that any
additional security mechanisms applied by the service code
itself are not accounted for. The exposure level determined
this way should not be misunderstood: a high exposure level
neither means that there is no effective sandboxing applied
by the service code itself, nor that the service is actually
vulnerable to remote or local attacks. High exposure levels
do indicate however that most likely the service might
benefit from additional settings applied to them.</p>

<p style="margin-left:9%; ">Please note that
many of the security and sandboxing settings individually
can be circumvented &mdash; unless combined with others. For
example, if a service retains the privilege to establish or
undo mount points many of the sandboxing options can be
undone by the service code itself. Due to that is essential
that each service uses the most comprehensive and strict
sandboxing and security settings possible. The tool will
take into account some of these combinations and
relationships between the settings, but not all. Also note
that the security and sandboxing settings analyzed here only
apply to the operations executed by the service code itself.
If a service has access to an IPC system (such as
D&minus;Bus) it might request operations from other services
that are not subject to the same restrictions. Any
comprehensive security and sandboxing analysis is hence
incomplete if the IPC access policy is not validated
too.</p>


<p class="mandt"><b>Example&nbsp;21.&nbsp;Analyze
systemd&minus;logind.service</b></p>

<pre style="margin-left:14%; ">
$ systemd-analyze security --no-pager systemd-logind.service
  NAME                DESCRIPTION                              EXPOSURE
✗ PrivateNetwork=     Service has access to the host's network      0.5
✗ User=/DynamicUser=  Service runs as root user                     0.4
✗ DeviceAllow=        Service has no device ACL                     0.2
✓ IPAddressDeny=      Service blocks all IP address ranges
...
→ Overall exposure level for systemd-logind.service: 4.1 OK 🙂</pre>

<h3>systemd&minus;analyze inspect&minus;elf FILE...
<a name="systemd&minus;analyze inspect&minus;elf FILE..."></a>
</h3>


<p style="margin-left:9%; ">This command
will load the specified files, and if they are ELF objects
(executables, libraries, core files, etc.) it will parse the
embedded packaging metadata, if any, and print it in a table
or json format. See the <b><font color="#0000FF">Packaging
Metadata</font></b> <font color="#000000">documentation for
more information.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;22.&nbsp;Print
information about a core file as JSON</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">
$ systemd-analyze inspect-elf --json=pretty \
        core.fsverity.1000.f77dac5dc161402aa44e15b7dd9dcf97.58561.1637106137000000
{
        "elfType" : "coredump",
        "elfArchitecture" : "AMD x86-64",
        "/home/bluca/git/fsverity-utils/fsverity" : {
                "type" : "deb",
                "name" : "fsverity-utils",
                "version" : "1.3-1",
                "buildId" : "7c895ecd2a271f93e96268f479fdc3c64a2ec4ee"
        },
        "/home/bluca/git/fsverity-utils/libfsverity.so.0" : {
                "type" : "deb",
                "name" : "fsverity-utils",
                "version" : "1.3-1",
                "buildId" : "b5e428254abf14237b0ae70ed85fffbb98a78f88"
        }
}
</font></pre>

<h3>systemd&minus;analyze fdstore UNIT...
<a name="systemd&minus;analyze fdstore UNIT..."></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">Lists
the current contents of the specified service unit's file
descriptor store. This shows names, inode types, device
numbers, inode numbers, paths and open modes of the open
file descriptors. The specified units must have
<i>FileDescriptorStoreMax=</i> enabled, see
<b>systemd.service</b>(5) for details.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;23.&nbsp;Table
output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">
$ systemd-analyze fdstore systemd-journald.service
FDNAME TYPE DEVNO   INODE RDEVNO PATH             FLAGS
stored sock 0:8   4218620 -      socket:[4218620] ro
stored sock 0:8   4213198 -      socket:[4213198] ro
stored sock 0:8   4213190 -      socket:[4213190] ro
…</font></pre>


<p style="margin-left:9%; "><font color="#000000">Note:
the &quot;DEVNO&quot; column refers to the major/minor
numbers of the device node backing the file system the file
descriptor's inode is on. The &quot;RDEVNO&quot; column
refers to the major/minor numbers of the device node itself
if the file descriptor refers to one. Compare with
corresponding <i>.st_dev</i> and <i>.st_rdev</i> fields in
<b>struct stat</b> (see <b>stat</b>(2) for details). The
listed inode numbers in the &quot;INODE&quot; column are on
the file system indicated by &quot;DEVNO&quot;.</font></p>

<h3>systemd&minus;analyze image&minus;policy POLICY...
<a name="systemd&minus;analyze image&minus;policy POLICY..."></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">This
command analyzes the specified image policy string, as per
<b>systemd.image-policy</b>(7). The policy is normalized and
simplified. For each currently defined partition identifier
(as per the</font> <b><font color="#0000FF">Discoverable
Partitions Specification</font></b><font color="#000000">)
the effect of the image policy string is shown in tabular
form.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;24.&nbsp;Example
Output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">
$ systemd-analyze image-policy swap=encrypted:usr=read-only-on+verity:root=encrypted
Analyzing policy: root=encrypted:usr=verity+read-only-on:swap=encrypted
       Long form: root=encrypted:usr=verity+read-only-on:swap=encrypted:=unused+absent

PARTITION       MODE        READ-ONLY GROWFS
root            encrypted   -         -
usr             verity      yes       -
home            ignore      -         -
srv             ignore      -         -
esp             ignore      -         -
xbootldr        ignore      -         -
swap            encrypted   -         -
root-verity     ignore      -         -
usr-verity      unprotected yes       -
root-verity-sig ignore      -         -
usr-verity-sig  ignore      -         -
tmp             ignore      -         -
var             ignore      -         -
default         ignore      -         -</font></pre>

<h3>systemd&minus;analyze has&minus;tpm2
<a name="systemd&minus;analyze has&minus;tpm2"></a>
</h3>

<p style="margin-left:9%; "><font color="#000000">Reports
whether the system is equipped with a usable TPM2 device. If
a TPM2 device has been discovered, is supported, and is
being used by firmware, by the OS kernel drivers and by
userspace (i.e. systemd) this prints &quot;yes&quot; and
exits with exit status zero. If no such device is
discovered/supported/used, prints &quot;no&quot;. Otherwise,
prints &quot;partial&quot;. In either of these two cases
exits with non&minus;zero exit status. It also shows five
lines indicating separately whether firmware, drivers, the
system, the kernel and libraries discovered/support/use
TPM2. Currently, required libraries are
libtss2&minus;esys.so.0, libtss2&minus;rc.so.0, and
libtss2&minus;mu.so.0. The requirement may be changed in the
future release.</font></p>


<p style="margin-left:9%; "><font color="#000000">Note,
this checks for TPM 2.0 devices only, and does not consider
TPM 1.2 at all.</font></p>


<p style="margin-left:9%; "><font color="#000000">Combine
with <b>&minus;&minus;quiet</b> to suppress the
output.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;25.&nbsp;Example
Output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">yes
+firmware
+driver
+system
+subsystem
+libraries
  +libtss2-esys.so.0
  +libtss2-rc.so.0
  +libtss2-mu.so.0</font></pre>


<p style="margin-left:9%; "><font color="#000000">Added
in version 257.</font></p>

<h3>systemd&minus;analyze pcrs [PCR...]
<a name="systemd&minus;analyze pcrs [PCR...]"></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">This
command shows the known TPM2 PCRs along with their
identifying names and current values.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;26.&nbsp;Example
Output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">$ systemd-analyze pcrs
NR NAME                SHA256
 0 platform-code       bcd2eb527108bbb1f5528409bcbe310aa9b74f687854cc5857605993f3d9eb11
 1 platform-config     b60622856eb7ce52637b80f30a520e6e87c347daa679f3335f4f1a600681bb01
 2 external-code       1471262403e9a62f9c392941300b4807fbdb6f0bfdd50abfab752732087017dd
 3 external-config     3d458cfe55cc03ea1f443f1562beec8df51c75e14a9fcf9a7234a13f198e7969
 4 boot-loader-code    939f7fa1458e1f7ce968874d908e524fc0debf890383d355e4ce347b7b78a95c
 5 boot-loader-config  864c61c5ea5ecbdb6951e6cb6d9c1f4b4eac79772f7fe13b8bece569d83d3768
 6 -                   3d458cfe55cc03ea1f443f1562beec8df51c75e14a9fcf9a7234a13f198e7969
 7 secure-boot-policy  9c905bd9b9891bfb889b90a54c4b537b889cfa817c4389cc25754823a9443255
 8 -                   0000000000000000000000000000000000000000000000000000000000000000
 9 kernel-initrd       9caa29b128113ef42aa53d421f03437be57211e5ebafc0fa8b5d4514ee37ff0c
10 ima                 5ea9e3dab53eb6b483b6ec9e3b2c712bea66bca1b155637841216e0094387400
11 kernel-boot         0000000000000000000000000000000000000000000000000000000000000000
12 kernel-config       627ffa4b405e911902fe1f1a8b0164693b31acab04f805f15bccfe2209c7eace
13 sysexts             0000000000000000000000000000000000000000000000000000000000000000
14 shim-policy         0000000000000000000000000000000000000000000000000000000000000000
15 system-identity     0000000000000000000000000000000000000000000000000000000000000000
16 debug               0000000000000000000000000000000000000000000000000000000000000000
17 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
18 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
19 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
20 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
21 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
22 -                   ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
23 application-support 0000000000000000000000000000000000000000000000000000000000000000</font></pre>

<h3>systemd&minus;analyze srk [&gt;FILE]
<a name="systemd&minus;analyze srk [&gt;FILE]"></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">This
command reads the Storage Root Key (SRK) from the TPM2
device, and writes it in marshalled TPM2B_PUBLIC format to
stdout. The output is non&minus;printable data, so it should
be redirected to a file or into a pipe.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;27.&nbsp;Save
the Storage Root Key to srk.tpm2b_public</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">systemd-analyze srk >srk.tpm2b_public
</font></pre>

<h3>systemd&minus;analyze architectures [NAME...]
<a name="systemd&minus;analyze architectures [NAME...]"></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">Lists
all known CPU architectures, and which ones are native. The
listed architecture names are those
<i>ConditionArchitecture=</i> supports, see
<b>systemd.unit</b>(5) for details. If architecture names
are specified only those specified are listed.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;28.&nbsp;Table
output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">$ systemd-analyze architectures
NAME        SUPPORT
alpha       foreign
arc         foreign
arc-be      foreign
arm         foreign
arm64       foreign
…
sparc       foreign
sparc64     foreign
tilegx      foreign
x86         secondary
x86-64      native</font></pre>

<h3>systemd&minus;analyze smbios11
<a name="systemd&minus;analyze smbios11"></a>
</h3>



<p style="margin-left:9%; "><font color="#000000">Shows
a list of SMBIOS Type #11 strings passed to the system. Also
see <b>smbios-type-11</b>(7).</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;29.&nbsp;Example
output</b></font></p>


<pre style="margin-left:14%; "><font color="#000000">
$ systemd-analyze smbios11
io.systemd.stub.kernel-cmdline-extra=console=ttyS0
io.systemd.credential.binary:ssh.ephemeral-authorized_keys-all=c3NoLWVkMjU1MTkgQUFBQUMzTnphQzFsWkRJMU5URTVBQUFBSURGd20xbFp4WlRGclJteG9ZQlozOTYzcE1uYlJCaDMwM1MxVXhLSUM2NmYgbGVubmFydEB6ZXRhCg==
io.systemd.credential:vmm.notify_socket=vsock-stream:2:254570042

3 SMBIOS Type #11 strings passed.</font></pre>

<p style="margin-left:9%; "><font color="#000000">Added
in version 257.</font></p>

<h3>systemd&minus;analyze chid<a name="systemd&minus;analyze chid"></a></h3>
  
<p style="margin-left:9%; "><font color="#000000">Shows a list of Computer
Hardware IDs (CHIDs) of the local system. These IDs identify the system's
computer hardware, based on SMBIOS data. See Using Computer Hardware IDs (CHIDs)
for details about CHIDs.</font></p>

<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;30.&nbsp;Example
Output</b></font></p>
<pre style="margin-left:14%; "><font color="#000000">
$ systemd-analyze chid
TYPE INPUT  CHID
   3 MFPSmp 520537c0-3b59-504f-b062-9682ea236b21
   4 MFPS-- edf05dc8-a53d-5b2c-8023-630bca2a2463
   5 MFP--- ebc6a4d9-ec48-537a-916b-c69fa4fdd814
   6 M--Smp 5ebe4bba-f598-5e90-9ff2-9fd0d3211465
   7 M--S-- 1a3fb835-b42a-5f9c-a38c-eff5bfd5c41d
   8 M-P-mp 2a831dce-8163-5bad-8406-435b8c752dd8
   9 M-P--- 7c21c878-4a75-50f7-9816-21e811588da0
  10 MF--mp 9a003537-bcc5-500e-b10a-8d8892e4fc64
  11 MF---- bb9122bb-8a5c-50d2-a742-a85beb719909
  13 M---mp bfc36935-5032-5987-a0a3-6311f01de33a

LEGEND: M → sys_vendor (LENOVO) ┄ F → product_family (ThinkPad X1 Carbon Gen 9) ┄ P → product_name (20XW0055GE)
        S → product_sku (LENOVO_MT_20XW_BU_Think_FM_ThinkPad X1 Carbon Gen 9) ┄ m → board_vendor (LENOVO)
        p → board_name (20XW0055GE)</font></pre>

<p style="margin-left:9%; "><font color="#000000">Added in version
                                                  258.</font></p>

<h3>systemd&minus;analyze transient-settings TYPE...<a name="systemd&minus;analyze transient-settings"></a></h3>
<p style="margin-left:9%; "><font color="#000000"> Lists properties that can be
set for various unit types via command line interfaces, in particular
systemctl(1) set-property and --property=/--automount-property= options in
systemd-run(1), systemd-nspawn(1), and systemd-mount(1). Those assignments are
possible for a subset of the properties that can be set in config files, see
systemd.unit(5), systemd.exec(5), systemd.resource-control(5), and the other
unit-type-specific pages. The TYPE argument must be a unit type ("service",
"socket", …). The properties that apply to the specific types are listed.
</font></p><p style="margin-left:9%; "><font color="#000000"> Note: D-Bus
properties documented in org.freedesktop.systemd1(5) form a partially
overlapping set with the lists generated by this command. Many D-Bus properties
and transient settings share the same names, but for example,
LogRateLimitIntervalSec= is described in systemd.exec(5) and would be listed by
this command, but the corresponding D-Bus property described in systemd.exec(5)
is LogRateLimitIntervalUSec.
</font></p><p style="margin-left:9%; "><font color="#000000"> This verb is
intended primarily for programmatic generation of shell completions.
</font></p>
  
<pre style="margin-left:14%; "><font color="#000000">
                                 
</font></pre>
<p style="margin-left:9%; "><font color="#000000">Added in version 258.</font></p>

<h3>systemd-analyze unit-shell SERVICE [command...]<a name="systemd&minus;analyze unit-shell"></a></h3>

<p style="margin-left:9%; "><font color="#000000"> The given command
runs on the namespace of the specified running service. If no command is given,
spawn and attach a shell with the namespace to the service.
</font></p>
  
<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;31.&nbsp;Example
Output</b></font></p>
  
<pre style="margin-left:14%; "><font color="#000000">$ systemd-analyze unit-shell systemd-resolved.service ls
bin   dev  etc	   home  lib	lib64	lost+found  mnt  proc  run   srv  tmp  var	vmlinuz.old
boot  efi  exitrd  init  lib32	libx32	media	    opt  root  sbin  sys  usr  vmlinuz	work</font></pre>
<p style="margin-left:9%; "><font color="#000000">Added in version 258.</font></p>
  
<h3>systemd-analyze unit-gdb SERVICE<a name="systemd&minus;analyze unit-gdb"></a></h3>

<p style="margin-left:9%; "><font color="#000000"> Spawn and attach a debugger
to the given service. By default, gdb(1) will be used. This may be changed using
the --debugger= option or the $SYSTEMD_DEBUGGER environment variable. Use the
--debugger-arguments= option to pass extra command line arguments to the
debugger and quote as appropriate when ARGS contain whitespace (See Example).
</font></p>
  
<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;32.&nbsp;Example
Output</b></font></p>
  
<pre style="margin-left:14%; "><font color="#000000">$ systemd-analyze --debugger-arguments="-batch -ex 'info all-registers'" unit-gdb systemd-oomd.service</font></pre>
<p style="margin-left:9%; "><font color="#000000">Added in version 258.</font></p>
  
<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:9%; "><font color="#000000">The
following options are understood:</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;system</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Operates
on the system systemd instance. This is the implied
default.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 209.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;user</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Operates
on the user systemd instance.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 186.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;global</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Operates
on the system&minus;wide configuration for user systemd
instance.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 238.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;order</b>,
<b>&minus;&minus;require</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
in conjunction with the <b>dot</b> command (see above),
selects which dependencies are shown in the dependency
graph. If <b>&minus;&minus;order</b> is passed, only
dependencies of type <i>After=</i> or <i>Before=</i> are
shown. If <b>&minus;&minus;require</b> is passed, only
dependencies of type <i>Requires=</i>, <i>Requisite=</i>,
<i>BindsTo=</i>, <i>Wants=</i>, and <i>Conflicts=</i> are
shown. If neither is passed, this shows dependencies of all
these types.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 198.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;from&minus;pattern=</b>,
<b>&minus;&minus;to&minus;pattern=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
in conjunction with the <b>dot</b> command (see above), this
selects which relationships are shown in the dependency
graph. Both options require a <b>glob</b>(7) pattern as an
argument, which will be matched against the left&minus;hand
and the right&minus;hand, respectively, nodes of a
relationship.</font></p>


<p style="margin-left:14%; "><font color="#000000">Each
of these can be used more than once, in which case the unit
name must match one of the values. When tests for both sides
of the relation are present, a relation must pass both tests
to be shown. When patterns are also specified as positional
arguments, they must match at least one side of the
relation. In other words, patterns specified with those two
options will trim the list of edges matched by the
positional arguments, if any are given, and fully determine
the list of edges shown otherwise.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 201.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;fuzz=</b><i>timespan</i></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
in conjunction with the <b>critical&minus;chain</b> command
(see above), also show units, which finished <i>timespan</i>
earlier, than the latest unit in the same level. The unit of
<i>timespan</i> is seconds unless specified with a different
unit, e.g. &quot;50ms&quot;.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 203.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;man=no</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Do not
invoke <b>man</b>(1) to verify the existence of man pages
listed in <i>Documentation=</i>.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 235.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;generators</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Invoke
unit generators, see <b>systemd.generator</b>(7). Some
generators require root privileges. Under a normal user,
running with generators enabled will generally result in
some warnings.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 235.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;instance=NAME</b></font></p>


<p style="margin-left:14%;"><font color="#000000">Specifies
fallback instance name for template units. This will be used
when one or more template units without an instance name
(e.g. foo@.service) specified for <b>systemd&minus;analyze
condition</b> with <b>&minus;&minus;unit=</b>,
<b>systemd&minus;analyze security</b>, and
<b>systemd&minus;analyze verify</b>. If unspecified,
&quot;test_instance&quot; will be used.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;recursive&minus;errors=</b><i>MODE</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Control
verification of units and their dependencies and whether
<b>systemd&minus;analyze verify</b> exits with a
non&minus;zero process exit status or not. With <b>yes</b>,
return a non&minus;zero process exit status when warnings
arise during verification of either the specified unit or
any of its associated dependencies. With <b>no</b>, return a
non&minus;zero process exit status when warnings arise
during verification of only the specified unit. With
<b>one</b>, return a non&minus;zero process exit status when
warnings arise during verification of either the specified
unit or its immediate dependencies. If this option is not
specified, zero is returned as the exit status regardless
whether warnings arise during verification or
not.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;root=</b><i>PATH</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>cat&minus;config</b>, <b>verify</b>, <b>condition</b> and
<b>security</b> when used with
<b>&minus;&minus;offline=</b>, operate on files underneath
the specified root path <i>PATH</i>.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 239.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;image=</b><i>PATH</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>cat&minus;config</b>, <b>verify</b>, <b>condition</b> and
<b>security</b> when used with
<b>&minus;&minus;offline=</b>, operate on files inside the
specified image path <i>PATH</i>.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;image&minus;policy=</b><i>policy</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes an
image policy string as argument, as per
<b>systemd.image-policy</b>(7). The policy is enforced when
operating on the disk image specified via
<b>&minus;&minus;image=</b>, see above. If not specified,
defaults to the &quot;*&quot; policy, i.e. all recognized
file systems in the image are used.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;offline=</b><i>BOOL</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>security</b>, perform an offline security review of the
specified unit files, i.e. does not have to rely on PID 1 to
acquire security information for the files like the
<b>security</b> verb when used by itself does. This means
that <b>&minus;&minus;offline=</b> can be used with
<b>&minus;&minus;root=</b> and <b>&minus;&minus;image=</b>
as well. If a unit's overall exposure level is above that
set by <b>&minus;&minus;threshold=</b> (default value is
100), <b>&minus;&minus;offline=</b> will return an
error.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;profile=</b><i>PATH</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>security &minus;&minus;offline=</b>, takes into
consideration the specified portable profile when assessing
unit settings. The profile can be passed by name, in which
case the well&minus;known system locations will be searched,
or it can be the full path to a specific drop&minus;in
file.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;threshold=</b><i>NUMBER</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>security</b>, allow the user to set a custom value to
compare the overall exposure level with, for the specified
unit files. If a unit's overall exposure level, is greater
than that set by the user, <b>security</b> will return an
error. <b>&minus;&minus;threshold=</b> can be used with
<b>&minus;&minus;offline=</b> as well and its default value
is 100.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;security&minus;policy=</b><i>PATH</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>security</b>, allow the user to define a custom set of
requirements formatted as a JSON file against which to
compare the specified unit file(s) and determine their
overall exposure level to security threats.</font></p>


<p style="margin-left:14%; "><font color="#000000"><b>Table&nbsp;1.&nbsp;Accepted
Assessment Test Identifiers</b> 
See example &quot;JSON Policy&quot; below.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;json=</b><i>MODE</i></font></p>

<p style="margin-left:14%;"><font color="#000000">With the
<b>security</b> command, generate a JSON formatted output of
the security analysis table. The format is a JSON array with
objects containing the following fields: <i>set</i> which
indicates if the setting has been enabled or not,
<i>name</i> which is what is used to refer to the setting,
<i>json_field</i> which is the JSON compatible identifier of
the setting, <i>description</i> which is an outline of the
setting state, and <i>exposure</i> which is a number in the
range 0.0...10.0, where a higher value corresponds to a
higher security threat. The JSON version of the table is
printed to standard output. The <i>MODE</i> passed to the
option can be one of three: <b>off</b> which is the default,
<b>pretty</b> and <b>short</b> which respectively output a
prettified or shorted JSON version of the security table.
With the <b>plot</b> command, generate a JSON formatted
output of the raw time data. The format is a JSON array with
objects containing the following fields: <i>name</i> which
is the unit name, <i>activated</i> which is the time after
startup the service was activated, <i>activating</i> which
is how long after startup the service was initially started,
<i>time</i> which is how long the service took to activate
from when it was initially started, <i>deactivated</i> which
is the time after startup that the service was deactivated,
<i>deactivating</i> which is the time after startup that the
service was initially told to deactivate.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;iterations=</b><i>NUMBER</i></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>calendar</b> command, show the specified number
of iterations the specified calendar expression will elapse
next. Defaults to 1.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 242.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;base&minus;time=</b><i>TIMESTAMP</i></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>calendar</b> command, show next iterations
relative to the specified point in time. If not specified,
defaults to the current time.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 244.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;unit=</b><i>UNIT</i></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>condition</b> command, evaluate all the
<i>Condition*=...</i> and <i>Assert*=...</i> assignments in
the specified unit file. The full unit search path is formed
by combining the directories for the specified unit with the
usual unit load paths. The variable
<i>$SYSTEMD_UNIT_PATH</i> is supported, and may be used to
replace or augment the compiled in set of unit load paths;
see <b>systemd.unit</b>(5). All units files present in the
directory containing the specified unit will be used in
preference to the other paths. If a template unit without an
instance name is specified (e.g. foo@.service),
&quot;test_instance&quot; will be used as the instance name,
which can be controlled by <b>&minus;&minus;instance=</b>
option.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;table</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>plot</b> command, the raw time data is output in
a table.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 253.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;no&minus;legend</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>plot</b> command in combination with either
<b>&minus;&minus;table</b> or <b>&minus;&minus;json=</b>, no
legends or hints are included in the output.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 253.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;H</b>,
<b>&minus;&minus;host=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Execute
the operation remotely. Specify a hostname, or a username
and hostname separated by &quot;@&quot;, to connect to. The
hostname may optionally be suffixed by a port ssh is
listening on, separated by &quot;:&quot;, and then a
container name, separated by &quot;/&quot;, which connects
directly to a specific container on the specified host. This
will use SSH to talk to the remote machine manager instance.
Container names may be enumerated with <b>machinectl
&minus;H</b> <i>HOST</i>. Put IPv6 addresses in
brackets.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;M</b>,
<b>&minus;&minus;machine=</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Execute
operation on a local container. Specify a container name to
connect to, optionally prefixed by a user name to connect as
and a separating &quot;@&quot; character. If the special
string &quot;.host&quot; is used in place of the container
name, a connection to the local system is made (which is
useful to connect to a specific user's user bus:
&quot;&minus;&minus;user
&minus;&minus;machine=lennart@.host&quot;). If the
&quot;@&quot; syntax is not used, the connection is made as
root user. If the &quot;@&quot; syntax is used either the
left hand side or the right hand side may be omitted (but
not both) in which case the local user name and
&quot;.host&quot; are implied.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;q</b>,
<b>&minus;&minus;quiet</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Suppress
hints and other non&minus;essential output.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 250.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;tldr</b></font></p>

<p style="margin-left:14%;"><font color="#000000">With
<b>cat&minus;config</b>, only print the
&quot;interesting&quot; parts of the configuration files,
skipping comments and empty lines and section headers
followed only by comments and empty lines.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 255.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;scale&minus;svg=</b><i>FACTOR</i></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>plot</b> command, the x&minus;axis of the plot
can be stretched by FACTOR (default: 1.0).</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;detailed</b></font></p>

<p style="margin-left:14%;"><font color="#000000">When used
with the <b>plot</b> command, activation timestamps details
can be seen in SVG plot.</font></p>


<p style="margin-left:14%; "><font color="#000000">Added
in version 257.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;h</b>,
<b>&minus;&minus;help</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Print a
short help text and exit.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;version</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Print a
short version string and exit.</font></p>


<p style="margin-left:9%; "><font color="#000000"><b>&minus;&minus;no&minus;pager</b></font></p>

<p style="margin-left:14%;"><font color="#000000">Do not
pipe output into a pager.</font></p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>



<p style="margin-left:9%; "><font color="#000000">For
most verbs, <b>0</b> is returned on success, and a
non&minus;zero failure code otherwise.</font></p>


<p style="margin-left:9%; "><font color="#000000">For
the verb <b>compare&minus;versions</b>, in the
two&minus;argument form, <b>12</b>, <b>0</b>, or <b>11</b>
are returned if the second version string is respectively
larger than, equal to, or smaller than the first. In the
three&minus;argument form, <b>0</b> or <b>1</b> are returned
when the condition is respectively true or false.</font></p>


<p style="margin-left:9%; "><font color="#000000">For
the verb <b>has&minus;tpm2</b>, <b>0</b> is returned if a
TPM2 device is discovered, supported, and used by firmware,
driver, and userspace (i.e. <b>systemd</b>). Otherwise, the
OR combination of the value <b>1</b> (in case firmware
support is missing), <b>2</b> (in case driver support is
missing), and <b>4</b> (in case userspace support is
missing). If no TPM2 support is available at all, value
<b>7</b> is hence returned.</font></p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>



<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_LEVEL</i></font></p>

<p style="margin-left:14%;"><font color="#000000">The
maximum log level of emitted messages (messages with a
higher log level, i.e. less important ones, will be
suppressed). Takes a comma&minus;separated list of values. A
value may be either one of (in order of decreasing
importance) <b>emerg</b>, <b>alert</b>, <b>crit</b>,
<b>err</b>, <b>warning</b>, <b>notice</b>, <b>info</b>,
<b>debug</b>, or an integer in the range 0...7. See
<b>syslog</b>(3) for more information. Each value may
optionally be prefixed with one of <b>console</b>,
<b>syslog</b>, <b>kmsg</b> or <b>journal</b> followed by a
colon to set the maximum log level for that specific log
target (e.g. <b>SYSTEMD_LOG_LEVEL=debug,console:info</b>
specifies to log at debug level except when logging to the
console which should be at info level). Note that the global
maximum log level takes priority over any per target maximum
log levels.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_COLOR</i></font></p>

<p style="margin-left:14%;"><font color="#000000">A
boolean. If true, messages written to the tty will be
colored according to priority.</font></p>


<p style="margin-left:14%; "><font color="#000000">This
setting is only useful when messages are written directly to
the terminal, because <b>journalctl</b>(1) and other tools
that display logs will color messages based on the log level
on their own.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_TIME</i></font></p>

<p style="margin-left:14%;"><font color="#000000">A
boolean. If true, console log messages will be prefixed with
a timestamp.</font></p>


<p style="margin-left:14%; "><font color="#000000">This
setting is only useful when messages are written directly to
the terminal or a file, because <b>journalctl</b>(1) and
other tools that display logs will attach timestamps based
on the entry metadata on their own.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_LOCATION</i></font></p>

<p style="margin-left:14%;"><font color="#000000">A
boolean. If true, messages will be prefixed with a filename
and line number in the source code where the message
originates.</font></p>


<p style="margin-left:14%; "><font color="#000000">Note
that the log location is often attached as metadata to
journal entries anyway. Including it directly in the message
text can nevertheless be convenient when debugging
programs.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_TID</i></font></p>

<p style="margin-left:14%;"><font color="#000000">A
boolean. If true, messages will be prefixed with the current
numerical thread ID (TID).</font></p>


<p style="margin-left:14%; "><font color="#000000">Note
that the this information is attached as metadata to journal
entries anyway. Including it directly in the message text
can nevertheless be convenient when debugging
programs.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_TARGET</i></font></p>

<p style="margin-left:14%;"><font color="#000000">The
destination for log messages. One of <b>console</b> (log to
the attached tty), <b>console&minus;prefixed</b> (log to the
attached tty but with prefixes encoding the log level and
&quot;facility&quot;, see <b>syslog</b>(3), <b>kmsg</b> (log
to the kernel circular log buffer), <b>journal</b> (log to
the journal), <b>journal&minus;or&minus;kmsg</b> (log to the
journal if available, and to kmsg otherwise), <b>auto</b>
(determine the appropriate log target automatically, the
default), <b>null</b> (disable log output).</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LOG_RATELIMIT_KMSG</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Whether
to ratelimit kmsg or not. Takes a boolean. Defaults to
&quot;true&quot;. If disabled, systemd will not ratelimit
messages written to kmsg.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_PAGER</i>,
<i>$PAGER</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Pager to
use when <b>&minus;&minus;no&minus;pager</b> is not given.
<i>$SYSTEMD_PAGER</i> is used if set; otherwise
<i>$PAGER</i> is used. If neither <i>$SYSTEMD_PAGER</i> nor
<i>$PAGER</i> are set, a set of well&minus;known pager
implementations is tried in turn, including <b>less</b>(1)
and <b>more</b>(1), until one is found. If no pager
implementation is discovered, no pager is invoked. Setting
those environment variables to an empty string or the value
&quot;cat&quot; is equivalent to passing
<b>&minus;&minus;no&minus;pager</b>.</font></p>


<p style="margin-left:14%; "><font color="#000000">Note:
if <i>$SYSTEMD_PAGERSECURE</i> is not set,
<i>$SYSTEMD_PAGER</i> and <i>$PAGER</i> can only be used to
disable the pager (with &quot;cat&quot; or &quot;&quot;),
and are otherwise ignored.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LESS</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Override
the options passed to <b>less</b> (by default
&quot;FRSXMK&quot;).</font></p>


<p style="margin-left:14%; "><font color="#000000">Users
might want to change two options in particular:</font></p>


<p style="margin-left:14%; "><font color="#000000"><b>K</b></font></p>

<p style="margin-left:19%;"><font color="#000000">This
option instructs the pager to exit immediately when Ctrl+C
is pressed. To allow <b>less</b> to handle Ctrl+C itself to
switch back to the pager command prompt, unset this
option.</font></p>


<p style="margin-left:19%; "><font color="#000000">If
the value of <i>$SYSTEMD_LESS</i> does not include
&quot;K&quot;, and the pager that is invoked is <b>less</b>,
Ctrl+C will be ignored by the executable, and needs to be
handled by the pager.</font></p>


<p style="margin-left:14%; "><font color="#000000"><b>X</b></font></p>

<p style="margin-left:19%;"><font color="#000000">This
option instructs the pager to not send termcap
initialization and deinitialization strings to the terminal.
It is set by default to allow command output to remain
visible in the terminal even after the pager exits.
Nevertheless, this prevents some pager functionality from
working, in particular paged output cannot be scrolled with
the mouse.</font></p>


<p style="margin-left:14%; "><font color="#000000">Note
that setting the regular <i>$LESS</i> environment variable
has no effect for <b>less</b> invocations by systemd
tools.</font></p>


<p style="margin-left:14%; "><font color="#000000">See
<b>less</b>(1) for more discussion.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_LESSCHARSET</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Override
the charset passed to <b>less</b> (by default
&quot;utf&minus;8&quot;, if the invoking terminal is
determined to be UTF&minus;8 compatible).</font></p>


<p style="margin-left:14%; "><font color="#000000">Note
that setting the regular <i>$LESSCHARSET</i> environment
variable has no effect for <b>less</b> invocations by
systemd tools.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_PAGERSECURE</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Common
pager commands like <b>less</b>(1), in addition to
&quot;paging&quot;, i.e. scrolling through the output,
support opening of or writing to other files and running
arbitrary shell commands. When commands are invoked with
elevated privileges, for example under <b>sudo</b>(8) or
<b>pkexec</b>(1), the pager becomes a security boundary.
Care must be taken that only programs with strictly limited
functionality are used as pagers, and unintended interactive
features like opening or creation of new files or starting
of subprocesses are not allowed. &quot;Secure mode&quot; for
the pager may be enabled as described below, <i>if the pager
supports that</i> (most pagers are not written in a way that
takes this into consideration). It is recommended to either
explicitly enable &quot;secure mode&quot; or to completely
disable the pager using <b>&minus;&minus;no&minus;pager</b>
or <i>PAGER=cat</i> when allowing untrusted users to execute
commands with elevated privileges.</font></p>


<p style="margin-left:14%; "><font color="#000000">This
option takes a boolean argument. When set to true, the
&quot;secure mode&quot; of the pager is enabled. In
&quot;secure mode&quot;, <b>LESSSECURE=1</b> will be set
when invoking the pager, which instructs the pager to
disable commands that open or create new files or start new
subprocesses. Currently only <b>less</b>(1) is known to
understand this variable and implement &quot;secure
mode&quot;.</font></p>


<p style="margin-left:14%; "><font color="#000000">When
set to false, no limitation is placed on the pager. Setting
<i>SYSTEMD_PAGERSECURE=0</i> or not removing it from the
inherited environment may allow the user to invoke arbitrary
commands.</font></p>


<p style="margin-left:14%; "><font color="#000000">When
<i>$SYSTEMD_PAGERSECURE</i> is not set, systemd tools
attempt to automatically figure out if &quot;secure
mode&quot; should be enabled and whether the pager supports
it. &quot;Secure mode&quot; is enabled if the effective UID
is not the same as the owner of the login session, see
<b>geteuid</b>(2) and <b>sd_pid_get_owner_uid</b>(3), or
when running under <b>sudo</b>(8) or similar tools
(<i>$SUDO_UID</i> is set ). In those cases,
<i>SYSTEMD_PAGERSECURE=1</i> will be set and pagers which
are not known to implement &quot;secure mode&quot; will not
be used at all. Note that this autodetection only covers the
most common mechanisms to elevate privileges and is intended
as convenience. It is recommended to explicitly set
<i>$SYSTEMD_PAGERSECURE</i> or disable the pager.</font></p>


<p style="margin-left:14%; "><font color="#000000">Note
that if the <i>$SYSTEMD_PAGER</i> or <i>$PAGER</i> variables
are to be honoured, other than to disable the pager,
<i>$SYSTEMD_PAGERSECURE</i> must be set too.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_COLORS</i></font></p>

<p style="margin-left:14%;"><font color="#000000">Takes a
boolean argument. When true, <b>systemd</b> and related
utilities will use colors in their output, otherwise the
output will be monochrome. Additionally, the variable can
take one of the following special values: &quot;16&quot;,
&quot;256&quot; to restrict the use of colors to the base 16
or 256 ANSI colors, respectively. This can be specified to
override the automatic decision based on <i>$TERM</i> and
what the console is connected to.</font></p>


<p style="margin-left:9%; "><font color="#000000"><i>$SYSTEMD_URLIFY</i></font></p>

<p style="margin-left:14%;"><font color="#000000">The value
must be a boolean. Controls whether clickable links should
be generated in the output for terminal emulators supporting
this. This can be specified to override the decision that
<b>systemd</b> makes based on <i>$TERM</i> and other
conditions.</font></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p style="margin-left:9%; "><font color="#000000"><b>Example&nbsp;33.&nbsp;JSON
Policy</b></font></p>


<p style="margin-left:9%; "><font color="#000000">The
JSON file passed as a path parameter to
<b>&minus;&minus;security&minus;policy=</b> has a
top&minus;level JSON object, with keys being the assessment
test identifiers mentioned above. The values in the file
should be JSON objects with one or more of the following
fields: <b>description_na</b> (string),
<b>description_good</b> (string), <b>description_bad</b>
(string), <b>weight</b> (unsigned integer), and <b>range</b>
(unsigned integer). If any of these fields corresponding to
a specific id of the unit file is missing from the JSON
object, the default built&minus;in field value corresponding
to that same id is used for security analysis as default.
The weight and range fields are used in determining the
overall exposure level of the unit files: the value of each
setting is assigned a badness score, which is multiplied by
the policy weight and divided by the policy range to
determine the overall exposure that the setting implies. The
computed badness is summed across all settings in the unit
file, normalized to the 1...100 range, and used to determine
the overall exposure level of the unit. By allowing users to
manipulate these fields, the 'security' verb gives them the
option to decide for themself which ids are more important
and hence should have a greater effect on the exposure
level. A weight of &quot;0&quot; means the setting will not
be checked.</font></p>


<pre style="margin-left:14%; "><font color="#000000">{
  "PrivateDevices":
    {
    "description_good": "Service has no access to hardware devices",
    "description_bad": "Service potentially has access to hardware devices",
    "weight": 1000,
    "range": 1
    },
  "PrivateMounts":
    {
    "description_good": "Service cannot install system mounts",
    "description_bad": "Service may install system mounts",
    "weight": 1000,
    "range": 1
    },
  "PrivateNetwork":
    {
    "description_good": "Service has no access to the host's network",
    "description_bad": "Service has access to the host's network",
    "weight": 2500,
    "range": 1
    },
  "PrivateTmp":
    {
    "description_good": "Service has no access to other software's temporary files",
    "description_bad": "Service has access to other software's temporary files",
    "weight": 1000,
    "range": 1
    },
  "PrivateUsers":
    {
    "description_good": "Service does not have access to other users",
    "description_bad": "Service has access to other users",
    "weight": 1000,
    "range": 1
    }
}
</font></pre>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; "><font color="#000000"><b>systemd</b>(1),
<b>systemctl</b>(1)</font></p>

<style type="text/css">
body { font-size: small; }
h2 { font-size: 1.0em; }
h1 { font-size: 1.2em; }
h2 { margin: 0.2em; color: navy; }
h3 { font-size: 0.9em; margin: 0.1em; color: darkred; }
b { color: darkgreen; font-weight: 650; }
i { color: indigo; font-weight: 600; }
p { font-size: 0.9em; line-height: 1.1em; }

p.mandt { margin: 0.2em 0.5em }
p.mandl { margin: 0.0em 2.0em; text-indent: 1.5em; }
</style>

</body>
</html>
