:PROPERTIES:
:ID:       c79795f9-4953-4662-8177-a1d2151d62ba
:END:
#+TITLE: NixOS: Trying ROCm Tensorflow with UV
#+CATEGORY: slips
#+TAGS:  

* Roam
* Notes
** Setup

Setup the =pyproject.toml=

#+begin_example toml
[project]
name = "uvtf"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = []

[[tool.uv.index]]
name = "rocm-manylinux"
url = "https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4"
explicity = true

[tool.uv.sources]
tensorflow-rocm = [{ index = "rocm-manylinux" }]

[dependency-groups]
dev = [
    "ipykernel>=7.1.0",
]

# uv pip install torch --torch-backend=auto
# UV_TORCH_BACKEND=auto uv pip install torch
#+end_example

Copy a template =main.py=

#+begin_src python
def main(): print("Hello from uvtorch!")
if __name__ == "__main__": main()
#+end_src

Needed to change to =python3.12= to get wheels from the =rocm/manylinux= repo


#+begin_src shell
uv pip install tensorflow-rocm==2.18.1 -f https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4 --upgrade
#+end_src
